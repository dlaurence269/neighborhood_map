<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Rome: Neighborhood Map</title>
        <!-- Declare Character Set -->
        <meta charset="utf-8">
        <!-- Link Bootstrap -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <!-- Set Viewport -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Load CSS -->
        <link rel="stylesheet" type="text/css" href="styles.css">
    </head>

    <body>
            <!-- Map -->
            <div id="map" class="container"></div>

            <!-- Side Panel -->
            <div id="side-panel" class="container col-xs-12 col-sm-4 col-lg-3">
                <button id="close-side-panel-button" class="button glyphicon glyphicon-chevron-up collapse-expand-panel"></button>
                <button id="open-side-panel-button" class="button glyphicon glyphicon-chevron-down collapse-expand-panel hidden"></button>
                <div id="search-and-results">
                    <!-- Search Bar -->
                    <input id="searchbar" class="form-control" type="text" placeholder="Search" 
                    data-bind="value: searchString, valueUpdate: 'keyup'" autocomplete="off">
                    <hr>
                    <!-- List of Results -->
                    <div id="results" data-bind="foreach: filteredResults">
                        <div class="result" data-bind="attr:{'data-id': id}, event: { click: $root.showResult }">
                            <div class="row title-line">
                                <img class="img-responsive col-xs-4" data-bind="attr:{src: imageURL}" alt="Image">
                                <p class="title" data-bind="text: name"></p>
                            </div>
                            <p class="description" data-bind="text: description"></p>
                            <div class="below-title collapse-expand-result hidden">
                                <p data-bind="text: address"></p>
                                <p data-bind="text: number"></p>
                                <p data-bind="text: hours"></p>
                                <p data-bind="text: closestTransitStop"></p>
                                <div class="row web-links">
                                    <a data-bind="attr:{href: website}" target="_blank">Website</a>
                                    <a data-bind="attr:{href: tripAdvisor}" target="_blank">Trip&nbsp;Advisor</a>
                                    <a data-bind="attr:{href: wikiLink}" target="_blank">Wikipedia</a>
                                </div>
                            </div>
                            <hr>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tweet -->
            <div id="info-window-content-0" class="hidden">
                <!-- Profile Image -->
                <img class="user-profile-image-url" 
                src="https://pbs.twimg.com/profile_images/987335304464994305/XkQymhVB_normal.jpg" alt="Profile Image">
                <p class="user-name">Mustapha Hussein</p>
                <p class="retweeted-status-text-handle">@Mustapha1508</p>
                <p class="retweeted-status-created-at">Sun Apr 22 21:03:01 +0000 2018</p>
                <p class="user-description">üáÆüáπItalia üá±üáßLibano #Roma √® ‚ù§Ô∏è Amor. Traduttore. Esperto in Comunicazione e relazioni internazionali. Giving is a lifestyle.</p>
                <p class="retweeted-status-text">#Buonanotte #Grandebellezza üí´ü•Öüß° #Romeisus #Pantheon @TrastevereRM @3BMeteo https://t.co/rMKpANN2kU</p>
                <!-- <img class="retweeted-status-extended-entities-media-media-url-https" 
                src="https://pbs.twimg.com/media/DbanbHfXkAAs0mf.jpg" alt="Posted Image"> -->
            </div>
     
        <!-- Load JavaScript -->
        <script src="js/knockout_2.2.0.js"></script>
        <script src="js/jQuery.js"></script>
        <script src="js/data.js"></script>
        <script src="js/map.js"></script>
        <!-- Load the Google Map JS API ASYNCHRONOUSLY -->
        <script async defer 
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDOKLk5ig0xf2-881RHBrgL2B63F033oKM&callback=initMap"
            type="text/javascript">
        </script>
        <!-- Load Twitter API -->
        <!-- <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> -->
        <!-- AJAX Request to Backend to Fetch Twitter Data -->
            <!-- needs to make a call to backend to run the get twitter data function, and do so before page loads -->
        <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> -->
        <script type="text/javascript" src="server.js">
            $.ajax({
                type: "POST",
                url: "/server.js",
                data: getTwitterAccessToken(),
                dataType: 'jsonp'
            }).done(function(response){
                console.log("Response: " + response)
            });
        </script>
    </body>
</html>
